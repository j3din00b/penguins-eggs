# SPDX-FileCopyrightText: no
# SPDX-License-Identifier: CC0-1.0
#
# Configurazione di Calamares machineid per Alpine Linux (OpenRC)

---
# Crea /etc/machine-id. Anche se il nome richiama systemd, questo file
# è diventato lo standard de-facto letto da D-Bus e altri servizi per
# identificare la macchina, anche su sistemi OpenRC. È FONDAMENTALE.
systemd: true
# Lo stile deve essere 'uuid' per generare un ID valido.
systemd-style: uuid

# Abilita la gestione dell'ID per D-Bus.
dbus: true
# Questa è la scelta chiave per i sistemi moderni.
# Crea /var/lib/dbus/machine-id come un link simbolico a /etc/machine-id.
# Questo assicura che ci sia una sola fonte di verità per l'ID di macchina,
# mantenendo la compatibilità con software più vecchio che cerca il file
# nella sua posizione storica.
dbus-symlink: true

# Lasciare i default per l'entropia va bene.
entropy-copy: false

# Rimuoviamo il file di entropia specifico di systemd, perché è inutile
# su un sistema Alpine/OpenRC. Manteniamo solo quello generico.
entropy-files:
    - /var/lib/urandom/random-seed